# This is the configuration for our Nginx web server inside the Docker container.
server {
  # Nginx will listen on port 80, the default HTTP port.
  listen 80;

  # The location of our built React files.
  root /usr/share/nginx/html;
  index index.html;

  # This is the most important part for a React App (Single Page App).
  # It tells Nginx: for any incoming request, first try to find a matching file ($uri),
  # then try to find a matching directory ($uri/), and if both fail,
  # serve the main index.html file. This allows React Router to handle all page routing.
  location / {
    try_files $uri $uri/ /index.html;
  }

  # Optional: Enable Gzip compression to make the app load faster.
  gzip on;
  gzip_proxied any;
  gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
  gzip_min_length 1000;
  gzip_disable "msie6";
}